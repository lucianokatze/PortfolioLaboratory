"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[9703],{55433:function(U,m,e){e.d(m,{r:function(){return p}});var o=e(32735),d=e(60216),y=e.n(d),O=e(74506),A=e(72850);function L(E,f,i){if(!E||!f)return{display:"none"};const{x:v,y:I}=i;return{transform:`translate(${v}px, ${I}px)`}}function p({renderItem:E}){const{itemType:f,isDragging:i,item:v,initialOffset:I,currentOffset:M,mouseOffset:w}=(0,O.useDragLayer)(R=>({item:R.getItem(),itemType:R.getItemType(),initialOffset:R.getInitialSourceClientOffset(),currentOffset:R.getSourceClientOffset(),isDragging:R.isDragging(),mouseOffset:R.getClientOffset()}));return i?o.createElement(A.x,{height:"100%",left:0,position:"fixed",pointerEvents:"none",top:0,zIndex:100,width:"100%"},o.createElement(A.x,{style:L(I,M,w)},E({type:f,item:v}))):null}p.propTypes={renderItem:y().func.isRequired}},73386:function(U,m,e){var o=e(32735);const d=(0,o.createContext)();var y=null},56327:function(U,m,e){e.d(m,{PL:function(){return A},Y9:function(){return Te.Y},zE:function(){return X},Ky:function(){return r},fi:function(){return g},zH:function(){return ge},r5:function(){return $}});var o=e(32735),d=e(15062),y=e(70031),A=()=>{const t=(0,d.v9)(y.Z),s=(0,o.useCallback)(n=>t?.components?.[n]??{},[t]);return{...t,getComponentLayout:s}},L=e(84306),p=e(24989),E=e(99381),f=e.n(E),i=e(33795),v=e.n(i),I=e(3040),M=e.n(I),w=e(95952);const R=(t,s)=>s.find(n=>n.uid===t),_=(t,s)=>{const n=Y(t,s),a=z(n.contentType,s),T=q(n.contentType,n.components);return M()(n,["contentType","layouts","edit"],a),M()(n,["contentType","layouts","list"],T),Object.keys(n.components).forEach(c=>{const h=z(n.components[c],s);M()(n,["components",c,"layouts","edit"],h)}),n},Y=(t,s)=>{const n=(0,w.w8)(f()(t),s,"contentType"),{components:a,contentType:T}=n,c=h=>Object.keys(h.metadatas).reduce((k,W)=>{const b=v()(h,["attributes",W],{});let N=h.metadatas[W];if(b.type==="relation"){const fe=R(b.targetModel,s),j=N.edit.mainField,V={name:j,schema:v()(fe,["attributes",j])};N={list:{...N.list,mainField:V},edit:{...N.edit,mainField:V}}}return k[W]=N,k},{});return M()(n,["contentType","metadatas"],c(T)),Object.keys(a).forEach(h=>{const k=a[h],W=c(k);M()(n,["components",h,"metadatas"],W)}),n},z=(t,s)=>t.layouts.edit.reduce((n,a)=>{const T=a.map(c=>{const h=v()(t,["attributes",c.name],{}),k={...c,fieldSchema:h,metadatas:v()(t,["metadatas",c.name,"edit"],{})};if(h.type==="relation"){const b=R(h.targetModel,s).pluginOptions||{};M()(k,"targetModelPluginOptions",b),M()(k,"queryInfos",{shouldDisplayRelationLink:re(t,c.name,s)})}return k});return n.push(T),n},[]),q=(t,s)=>t.layouts.list.reduce((a,T)=>{const c=v()(t,["attributes",T],{}),h=v()(t,["metadatas",T,"list"],{}),k=c.type;if(k==="relation")return a.push({key:`__${T}_key__`,name:T,fieldSchema:c,metadatas:h}),a;if(k==="component"){const W=s[c.component],b=W.settings.mainField,N=W.attributes[b];return a.push({key:`__${T}_key__`,name:T,fieldSchema:c,metadatas:{...h,mainField:{...N,name:b}}}),a}return a.push({key:`__${T}_key__`,name:T,fieldSchema:c,metadatas:h}),a},[]),re=(t,s,n)=>{const a=v()(t,["attributes",s,"targetModel"],"");return ee(n).includes(a)},ee=t=>t.filter(s=>s.isDisplayed).map(({uid:s})=>s);var H=_,te=e(97889);const K={error:null,isLoading:!0,layout:{},layouts:{}};var Q=(t,s)=>(0,te.ZP)(t,n=>{switch(s.type){case"GET_DATA":{n.isLoading=!0,n.error=null,n.layout={};break}case"GET_DATA_SUCCEEDED":{const a=s.data.contentType.uid;n.layout=s.data,n.layouts[a]=s.data,n.isLoading=!1;break}case"GET_DATA_ERROR":{n.isLoading=!1,n.error=s.error;break}case"SET_LAYOUT_FROM_STATE":{n.error=null,n.layout=t.layouts[s.uid];break}case"UPDATE_LAYOUT":{const a=t.layout;n.layout={...a,contentType:{uid:a.contentType.uid,...s.newLayout.contentType}},n.layouts[a.contentType.uid]={...a,contentType:{uid:a.contentType.uid,...s.newLayout.contentType}};break}default:return n}}),B=e(42882),X=t=>{const[{error:s,isLoading:n,layout:a,layouts:T},c]=(0,o.useReducer)(Q,K),h=(0,o.useMemo)(B.Vo,[]),{schemas:k}=(0,d.v9)(j=>h(j),d.wU),W=(0,o.useRef)(!0),{get:b}=(0,p.kY)(),N=(0,o.useCallback)(async(j,V)=>{if(T[j]){c({type:"SET_LAYOUT_FROM_STATE",uid:j});return}c({type:"GET_DATA"});try{const oe=(0,w.IF)(`content-types/${j}/configuration`),{data:{data:Ee}}=await b(oe,{cancelToken:V.token});c({type:"GET_DATA_SUCCEEDED",data:H(Ee,k)})}catch(oe){if(L.Z.isCancel(oe))return;W.current&&console.error(oe),W.current&&c({type:"GET_DATA_ERROR",error:oe})}},[T,k,b]);(0,o.useEffect)(()=>()=>{W.current=!1},[]),(0,o.useEffect)(()=>{const V=L.Z.CancelToken.source();return N(t,V),()=>{V.cancel("Operation canceled by the user.")}},[t,N]);const fe=(0,o.useCallback)(j=>{c({type:"UPDATE_LAYOUT",newLayout:H(j,k)})},[k]);return{error:s,isLoading:n,layout:a,updateLayout:fe}},J=t=>t["content-manager_app"].collectionTypeLinks,Z=e(33348),ie=e(85973),ye=e.n(ie);const ue=(t,s)=>Object.keys(t).reduce((n,a)=>{const T=t[a],c=v()(s,[a],T);return ye()(T)?{...n,[a]:ue(T,c)}:(n[a]=c,n)},{});var me=(t,s,n)=>{const a=t.find(({to:N})=>N.includes(s));if(!a)return"/";const{to:T,search:c}=a,h=(0,Z.parse)(c),k=(0,Z.parse)(n.substring(1)),W=ue(h,k);return`${T}?${(0,Z.stringify)(W,{encode:!1})}`},r=t=>{const[{rawQuery:s}]=(0,p.Kx)(),n=(0,d.v9)(J);return me(n,t,s)},u=e(53038),g=()=>{const{search:t}=(0,u.TH)(),s=t?(0,Z.parse)(t.substring(1)):{};return s.plugins?(0,Z.stringify)({plugins:s.plugins},{encode:!1}):""},S=e(89334);const x=(t,s,n)=>({type:S.m,permissions:t,__meta__:{plugins:s,containerName:n}}),P=()=>({type:S.Q}),D=t=>t["content-manager_rbacManager"].permissions,C=t=>t.rbacProvider.collectionTypesRelatedPermissions;var $=(t,s,n="listView")=>{const a=(0,d.v9)(C),T=(0,d.v9)(D),c=(0,d.I0)(),h=a[s];return(0,o.useEffect)(()=>h?(c(x(h,t?t.plugins:null,n)),()=>{c(P())}):()=>{},[h,c,t,n]),T},le=e(73386);const G=()=>useContext(WysiwygContext);var se=null;const ge=t=>{const s=(0,o.useRef)();return(0,o.useEffect)(()=>{s.current=t},[t]),s.current};var Te=e(90553),ve=e(18777)},90553:function(U,m,e){e.d(m,{Y:function(){return A}});var o=e(32735),d=e(74506),y=e.n(d),O=e(18777);const A=(L,{type:p="STRAPI_DND",index:E,item:f={},onStart:i,onEnd:v,onGrabItem:I,onDropItem:M,onCancel:w,onMoveItem:R,dropSensitivity:_="regular"})=>{const Y=(0,o.useRef)(null),[{handlerId:z},q]=(0,d.useDrop)({accept:p,collect(K){return{handlerId:K.getHandlerId()}},hover(K,ae){if(!Y.current)return;const Q=K.index,B=E;if(Q!==B){if(_==="regular"){const ne=Y.current.getBoundingClientRect(),X=(ne.bottom-ne.top)/2,J=ae.getClientOffset().y-ne.top;if(Q<B&&J<X||Q>B&&J>X)return}R(B,Q),K.index=B}}}),[{isDragging:re},ee,H]=(0,d.useDrag)({type:p,item(){i&&i();const{width:K}=Y.current?.getBoundingClientRect()??{};return{index:E,width:K,...f}},end(){v&&v()},canDrag:L,isDragging:f.id?K=>f.id===K.getItem().id:void 0,collect:K=>({isDragging:K.isDragging()})}),te=(0,O.A)(L,E,{onGrabItem:I,onDropItem:M,onCancel:w,onMoveItem:R});return[{handlerId:z,isDragging:re,handleKeyDown:te},Y,q,ee,H]}},18777:function(U,m,e){e.d(m,{A:function(){return d}});var o=e(32735);const d=(y,O,{onCancel:A,onDropItem:L,onGrabItem:p,onMoveItem:E})=>{const[f,i]=(0,o.useState)(!1),v=R=>{f&&(R==="UP"?E(O-1,O):R==="DOWN"&&E(O+1,O))},I=()=>{f?(L&&L(O),i(!1)):(p&&p(O),i(!0))},M=()=>{f&&(i(!1),A&&A(O))};return R=>{if(y&&!(R.key==="Tab"&&!f))switch(R.preventDefault(),R.key){case" ":case"Enter":I();break;case"Escape":M();break;case"ArrowDown":case"ArrowRight":v("DOWN");break;case"ArrowUp":case"ArrowLeft":v("UP");break;default:}}}},42882:function(U,m,e){e.d(m,{Jg:function(){return E},KQ:function(){return L},Vo:function(){return p},Yg:function(){return y}});var o=e(98178),d=e(34947);const y=()=>i=>i["content-manager_app"]||d.E,O=()=>createSelector(y(),i=>i),A=()=>createSelector(y(),i=>i.models),L=()=>(0,o.P1)(y(),i=>({collectionTypeLinks:i.collectionTypeLinks,singleTypeLinks:i.singleTypeLinks})),p=()=>(0,o.P1)(y(),({components:i,models:v})=>({schemas:[...i,...v]})),E=(0,o.P1)(y(),i=>i.fieldSizes);var f=null},70031:function(U,m){const e=o=>o["content-manager_editViewLayoutManager"].currentLayout;m.Z=e},25708:function(U,m){m.Z={COMPONENT:"component",EDIT_FIELD:"editField",FIELD:"field",DYNAMIC_ZONE:"dynamicZone",RELATION:"relation"}},47510:function(U,m){const e=o=>`content-manager.${o}`;m.Z=e},95952:function(U,m,e){e.d(m,{_Q:function(){return J.Z},W3:function(){return O},ko:function(){return E},FE:function(){return i},Di:function(){return w},du:function(){return z},TA:function(){return ee},Ts:function(){return ae},Uo:function(){return B},IF:function(){return X},OB:function(){return de.Z},w8:function(){return ue},kc:function(){return pe}});var o=e(99381),d=e.n(o),O=(r,u,l)=>{if(Array.isArray(r)&&u>=0&&l>=0&&u<=r.length-1&&l<=r.length-1){const g=d()(r),S=g.splice(u,1);return g.splice(l,0,S[0]),g}return r},A=e(59578),L=e.n(A),E=r=>{const u=r.type;return u==="relation"?!L()(r.relationType).includes("morph"):!["json","dynamiczone","richtext","password"].includes(u)&&!!u};const f=(r,u)=>{typeof r=="function"?r(u):r!=null&&(r.current=u)},i=(...r)=>u=>r.forEach(l=>f(l,u));var v=e(33795),I=e.n(v);const M=(r,u)=>Object.keys(r).reduce((l,g)=>{const S=I()(r,[g],{}),{default:x,component:P,type:D,required:C,min:F,repeatable:$}=S;if(x!==void 0&&(l[g]=x),D==="component"){const le=u?.[P]?.attributes??{},G=M(le,u);if(C===!0&&(l[g]=$===!0?[]:G),F&&$===!0&&C){l[g]=[];for(let se=0;se<F;se+=1)l[g].push(G)}}return D==="dynamiczone"&&C===!0&&(l[g]=[]),l},{});var w=M,R=e(9086),_=e.n(R),z=({layouts:r,metadatas:u,...l})=>{const g=r.list.map(P=>P.name?P.name:P),S=Object.keys(u).reduce((P,D)=>{const C=I()(u,[D],{});let F=C.edit;return F.mainField&&(F={...F,mainField:C.edit.mainField.name}),{...P,[D]:{edit:F,list:_()(C.list,["mainField"])}}},{}),x=r.edit.map(P=>P.map(({name:D,size:C})=>({name:D,size:C})));return{...l,layouts:{edit:x,list:g},metadatas:S}};const q=(r,u)=>r.map(l=>({...l,subject:u}));var ee=r=>{const u={create:[{action:"plugin::content-manager.explorer.create",subject:null}],delete:[{action:"plugin::content-manager.explorer.delete",subject:null}],publish:[{action:"plugin::content-manager.explorer.publish",subject:null}],read:[{action:"plugin::content-manager.explorer.read",subject:null}],update:[{action:"plugin::content-manager.explorer.update",subject:null}]};return Object.keys(u).reduce((l,g)=>(l[g]=q(u[g],r),l),{})},H=e(95919),te=e.n(H),ae=r=>r.split(".").filter(u=>te()(parseInt(u,10))),B=r=>{if(r.length===0)return-1;const u=Math.max.apply(Math,r.map(l=>l.__temp_key__??0));return Number.isNaN(u)?-1:u},X=r=>`/content-manager/${r}`,de=e(47510),J=e(25708),Z=e(3040),ie=e.n(Z),ue=(r,u,l)=>{const g=D=>u.find(C=>C.uid===D),S=Object.assign({},r),x=r[l].uid,P=g(x);return ie()(S,[l],{...r[l],...P}),Object.keys(r.components).forEach(D=>{const C=g(D);ie()(S,["components",D],{...r.components[D],...C})}),S},ce=e(24989),pe=(r,u,l)=>{const g=(S,x)=>Object.keys(S).reduce((P,D)=>{const C=(0,ce.UN)(x,D),F=I()(S,D),$=(0,ce.k2)(x,[D,"component"]),le=(0,ce.k2)(x,[D,"repeatable"]);return C==="dynamiczone"?(P[D]=F.map(G=>g(G,l[G.__component])),P):C==="component"?(le?P[D]=F&&F.map(G=>g(G,l[$])):P[D]=F&&g(F,l[$]),P):(C!=="password"&&(P[D]=F),P)},{});return g(r,u)}},28315:function(U,m,e){e.d(m,{K:function(){return p}});var o=e(32735),d=e(60216),y=e.n(d),O=e(88994),A=e(87933),L=e(49372);function p({children:E,...f}){const{color:i}=f.data;return o.createElement(O.c.Option,{...f},o.createElement(A.k,{alignItems:"center",gap:2},o.createElement(A.k,{height:2,background:i,hasRadius:!0,shrink:0,width:2}),o.createElement(L.Z,{textColor:"neutral800",ellipsis:!0},E)))}p.propTypes={children:y().node.isRequired,data:y().shape({color:y().string}).isRequired}},8445:function(U,m,e){e.d(m,{R:function(){return p}});var o=e(32735),d=e(60216),y=e.n(d),O=e(88994),A=e(87933),L=e(49372);function p({children:E,...f}){const{color:i}=f.data;return o.createElement(O.c.SingleValue,{...f},o.createElement(A.k,{alignItems:"center",gap:2},o.createElement(A.k,{height:2,background:i,hasRadius:!0,shrink:0,width:2}),o.createElement(L.Z,{textColor:"neutral800",ellipsis:!0},E)))}p.defaultProps={children:null},p.propTypes={children:y().node,data:y().shape({color:y().string}).isRequired}},61937:function(U,m,e){e.d(m,{$k:function(){return p},FT:function(){return f},Nj:function(){return L},Ot:function(){return A},QM:function(){return y},lv:function(){return E},sN:function(){return d},uL:function(){return i},x4:function(){return O}});var o=e(12301);const d="settings_review-workflows",y="Settings/Review_Workflows/SET_WORKFLOWS",O="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",A="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",L="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",p="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",E={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},f=o.W.colors.primary600,i={STAGE:"stage"}},67350:function(U,m,e){e.d(m,{n:function(){return A}});var o=e(20108),d=e(24989);const y="review-workflows",O="/admin/review-workflows";function A(L){const{get:p}=(0,d.kY)(),E=(0,o.useQueryClient)(),f=[y,L??"default"];async function i({params:M={populate:"stages"}}){try{const{data:{data:w}}=await p(`${O}/workflows/${L??""}`,{params:M});return w}catch{return null}}async function v(){await E.refetchQueries(f)}return{workflows:(0,o.useQuery)(f,i),refetchWorkflow:v}}}}]);
